{
  "$schema": "../../schemas/resource-schema.json",
  "uri": "examples://workflows/advanced-workflow",
  "name": "Advanced Workflow Example",
  "description": "Complex workflow demonstrating advanced features including tool calls, file handling, custom instructions, and error handling patterns",
  "mimeType": "text/markdown",
  "category": "examples",
  "tags": ["workflow", "advanced", "tools", "file-handling", "error-handling", "custom-instructions", "complex"],
  "contentType": "markdown",
  "content": "# Advanced Workflow Example\n\nThis example demonstrates advanced patterns for complex AI Provider Assistant workflows.\n\n## Step 1: Create a Specialized Assistant with Tools\n```json\n{\n  \"tool\": \"assistant-create\",\n  \"arguments\": {\n    \"model\": \"gpt-4\",\n    \"name\": \"Advanced Data Analyst\",\n    \"description\": \"Expert assistant for complex data analysis with code execution and file processing capabilities\",\n    \"instructions\": \"You are an expert data analyst with advanced statistical knowledge. When analyzing data:\\n\\n1. Always start with exploratory data analysis\\n2. Use appropriate statistical methods\\n3. Create visualizations to support findings\\n4. Provide actionable business insights\\n5. Handle missing data appropriately\\n6. Validate assumptions before applying statistical tests\\n\\nUse code_interpreter for calculations and file_search for documentation.\",\n    \"tools\": [\n      {\"type\": \"code_interpreter\"},\n      {\"type\": \"file_search\"}\n    ],\n    \"metadata\": {\n      \"specialization\": \"data_analysis\",\n      \"complexity\": \"advanced\",\n      \"version\": \"2.0\"\n    }\n  }\n}\n```\n\n## Step 2: Create Thread with Rich Metadata\n```json\n{\n  \"tool\": \"thread-create\",\n  \"arguments\": {\n    \"metadata\": {\n      \"project_id\": \"proj_analytics_2025\",\n      \"user_id\": \"analyst_jane_doe\",\n      \"department\": \"business_intelligence\",\n      \"priority\": \"high\",\n      \"deadline\": \"2025-02-15\",\n      \"data_sources\": [\"sales_db\", \"customer_feedback\", \"market_research\"],\n      \"analysis_type\": \"predictive_modeling\",\n      \"stakeholders\": [\"ceo\", \"marketing_director\", \"sales_manager\"]\n    }\n  }\n}\n```\n\n## Step 3: Add Complex Message with Context\n```json\n{\n  \"tool\": \"message-create\",\n  \"arguments\": {\n    \"thread_id\": \"thread_advanced_123\",\n    \"role\": \"user\",\n    \"content\": \"I need you to analyze our Q4 sales data to predict Q1 performance. The dataset includes:\\n\\n- 50,000 transaction records\\n- Customer demographics\\n- Product categories\\n- Seasonal trends\\n- Marketing campaign data\\n\\nPlease:\\n1. Identify key performance drivers\\n2. Build a predictive model\\n3. Provide confidence intervals\\n4. Suggest optimization strategies\\n\\nThe analysis should account for the upcoming product launch and increased marketing spend.\",\n    \"metadata\": {\n      \"message_type\": \"analysis_request\",\n      \"complexity\": \"high\",\n      \"expected_duration\": \"45-60 minutes\"\n    }\n  }\n}\n```\n\n## Step 4: Run with Custom Configuration\n```json\n{\n  \"tool\": \"run-create\",\n  \"arguments\": {\n    \"thread_id\": \"thread_advanced_123\",\n    \"assistant_id\": \"asst_analyst_456\",\n    \"additional_instructions\": \"Focus on statistical significance and provide detailed methodology. Include code snippets for reproducibility. Address potential biases in the data.\",\n    \"metadata\": {\n      \"run_type\": \"complex_analysis\",\n      \"timeout\": \"3600\",\n      \"priority\": \"high\"\n    }\n  }\n}\n```\n\n## Step 5: Monitor Run with Tool Call Handling\n```json\n{\n  \"tool\": \"run-get\",\n  \"arguments\": {\n    \"thread_id\": \"thread_advanced_123\",\n    \"run_id\": \"run_analysis_789\"\n  }\n}\n```\n\n## Step 6: Handle Tool Calls (if required_action status)\n```json\n{\n  \"tool\": \"run-submit-tool-outputs\",\n  \"arguments\": {\n    \"thread_id\": \"thread_advanced_123\",\n    \"run_id\": \"run_analysis_789\",\n    \"tool_outputs\": [\n      {\n        \"tool_call_id\": \"call_code_exec_001\",\n        \"output\": \"Analysis completed. Model accuracy: 87.3%. Key drivers identified: seasonality (0.42), marketing_spend (0.31), product_mix (0.27).\"\n      }\n    ]\n  }\n}\n```\n\n## Step 7: Retrieve Detailed Run Steps\n```json\n{\n  \"tool\": \"run-step-list\",\n  \"arguments\": {\n    \"thread_id\": \"thread_advanced_123\",\n    \"run_id\": \"run_analysis_789\",\n    \"order\": \"asc\"\n  }\n}\n```\n\n## Step 8: Update Assistant Based on Results\n```json\n{\n  \"tool\": \"assistant-update\",\n  \"arguments\": {\n    \"assistant_id\": \"asst_analyst_456\",\n    \"instructions\": \"You are an expert data analyst with advanced statistical knowledge. Based on recent analysis, you've learned that our data shows strong seasonal patterns and marketing spend correlation. When analyzing similar datasets:\\n\\n1. Always check for seasonality first\\n2. Include marketing attribution analysis\\n3. Use ensemble methods for better accuracy\\n4. Validate with holdout data\\n\\nContinue with your standard analytical approach for other aspects.\",\n    \"metadata\": {\n      \"last_updated\": \"2025-01-31T15:30:00Z\",\n      \"update_reason\": \"learned_from_analysis\",\n      \"version\": \"2.1\"\n    }\n  }\n}\n```\n\n## Advanced Patterns\n\n### Error Handling\n```json\n// If run fails, cancel and retry with different parameters\n{\n  \"tool\": \"run-cancel\",\n  \"arguments\": {\n    \"thread_id\": \"thread_advanced_123\",\n    \"run_id\": \"run_failed_999\"\n  }\n}\n```\n\n### Thread Management\n```json\n// Update thread metadata as project evolves\n{\n  \"tool\": \"thread-update\",\n  \"arguments\": {\n    \"thread_id\": \"thread_advanced_123\",\n    \"metadata\": {\n      \"status\": \"analysis_complete\",\n      \"completion_date\": \"2025-01-31T16:00:00Z\",\n      \"final_accuracy\": \"87.3%\",\n      \"recommendations_count\": 5\n    }\n  }\n}\n```\n\n## Best Practices for Advanced Workflows\n\n1. **Rich Metadata**: Use comprehensive metadata for tracking and organization\n2. **Tool Integration**: Leverage code_interpreter and file_search effectively\n3. **Error Recovery**: Implement robust error handling and retry logic\n4. **Progress Monitoring**: Track run steps for complex operations\n5. **Adaptive Learning**: Update assistant instructions based on results\n6. **Resource Management**: Clean up completed threads and unused assistants\n7. **Security**: Sanitize inputs and validate outputs\n8. **Performance**: Monitor token usage and optimize for cost\n\n## Complex Use Cases\n\n- **Multi-step Analysis**: Complex data science workflows\n- **Document Processing**: Large-scale document analysis with file_search\n- **Code Generation**: Advanced programming tasks with code_interpreter\n- **Research Projects**: Long-running research with multiple iterations\n- **Business Intelligence**: Comprehensive reporting and insights generation",
  "metadata": {
    "version": "1.0.0",
    "author": "Jezweb MCP Core Team",
    "lastModified": "2025-01-31T12:00:00.000Z",
    "usage": "workflow-example",
    "size": 4096,
    "difficulty": "advanced",
    "estimatedTime": "30-45 minutes",
    "prerequisites": ["basic-workflow", "tool-usage-understanding", "api-familiarity"]
  }
}